<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal Crafter Notes</title>
    <style>
        /* --- 1. ROYAL THEME (Dark & Gold) --- */
        :root {
            --bg-color: #121212;
            --panel-bg: #1c1c1c;
            --accent-gold: #d4af37;
            --text-main: #e0e0e0;
            --danger: #ff4d4d;
            --success: #2ecc71;
            --card-border: #333;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 10px;
            padding-bottom: 250px; /* Space for Sticky Panel */
        }

        h1 {
            text-align: center;
            color: var(--accent-gold);
            font-size: 1.4rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }

        /* --- 2. INPUT HARGA (DIGIT PICKER - GRID 4) --- */
        .price-section {
            background: var(--panel-bg);
            border: 1px solid var(--accent-gold);
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.1);
        }

        .price-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 Kolom: Leather, Cloth, Bar, Plank */
            gap: 5px;
        }

        .price-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #252525;
            padding: 5px;
            border-radius: 6px;
        }

        .mat-icon-head { width: 30px; height: 30px; margin-bottom: 5px; object-fit: contain; }

        /* Digit Picker Style */
        .digit-picker {
            display: flex;
            gap: 1px;
            justify-content: center;
        }
        .digit-wrapper { display: flex; flex-direction: column; align-items: center; }
        
        .btn-digit {
            background: #333; border: none; color: #888;
            width: 14px; height: 14px; font-size: 8px;
            border-radius: 2px; cursor: pointer;
        }
        .btn-digit:hover { background: var(--accent-gold); color: #000; }
        
        .val-digit {
            font-family: 'Consolas', monospace;
            font-size: 0.9rem; font-weight: bold; color: var(--accent-gold);
            margin: 1px 0;
        }

        /* --- 3. CRAFTING GRID --- */
        .profession-title {
            color: var(--accent-gold);
            font-size: 0.9rem;
            margin: 20px 0 10px 0;
            padding-left: 10px;
            border-left: 3px solid var(--accent-gold);
            text-transform: uppercase;
        }

        .item-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
        }

        .item-card {
            background-color: var(--panel-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 5px;
            width: 85px; /* Compact */
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .item-card.active { border-color: var(--accent-gold); background: #222; }

        .item-img { width: 45px; height: 45px; object-fit: contain; }
        .item-name { font-size: 0.6rem; color: #ccc; margin: 5px 0; text-align: center; height: 20px; line-height: 1; }

        /* Counter Buttons */
        .counter-box {
            display: flex; justify-content: space-between; align-items: center;
            width: 100%; background: #111; border-radius: 12px; padding: 2px;
        }
        .btn-cnt {
            width: 20px; height: 20px; border-radius: 50%; border: none;
            color: white; font-weight: bold; font-size: 1rem; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .min { background: var(--danger); }
        .plus { background: var(--success); }
        .cnt-val { font-size: 0.8rem; font-weight: bold; }

        /* --- 4. DASHBOARD (STICKY BOTTOM) --- */
        .dashboard {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: #1a1a1a; border-top: 2px solid var(--accent-gold);
            box-shadow: 0 -5px 20px rgba(0,0,0,0.8);
            z-index: 999; display: flex; flex-direction: column;
            max-height: 45vh;
        }

        .dash-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px 15px; background: #111;
        }
        
        .reset-btn {
            background: var(--danger); color: white; border: none;
            padding: 5px 12px; border-radius: 15px; font-size: 0.7rem; font-weight: bold;
            cursor: pointer;
        }

        .dash-tabs { display: flex; background: #222; }
        .tab {
            flex: 1; text-align: center; padding: 10px; font-size: 0.8rem;
            color: #777; border-bottom: 2px solid transparent; cursor: pointer;
        }
        .tab.active { color: var(--accent-gold); border-bottom-color: var(--accent-gold); font-weight: bold; }

        .dash-body { padding: 10px; overflow-y: auto; flex-grow: 1; }
        .hidden { display: none; }

        /* Gallery Result Style */
        .gallery { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
        .gal-item { position: relative; width: 45px; height: 45px; background: #333; border-radius: 5px; border: 1px solid #555; }
        .gal-item img { width: 100%; height: 100%; }
        .gal-badge {
            position: absolute; bottom: -5px; right: -5px;
            background: var(--accent-gold); color: black;
            font-size: 0.7rem; font-weight: bold; padding: 1px 4px; border-radius: 4px;
        }

        /* Material List Style */
        .mat-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 6px 0; border-bottom: 1px solid #333; font-size: 0.85rem;
        }
        .mat-label { display: flex; align-items: center; gap: 8px; color: #ccc; }
        .mat-label img { width: 20px; height: 20px; }
        .mat-total { font-family: 'Consolas', monospace; color: var(--accent-gold); text-align: right; }
        .grand-total { 
            text-align: right; font-size: 1.1rem; color: var(--accent-gold); 
            margin-top: 10px; font-weight: bold; padding-top: 10px; border-top: 1px dashed #555;
        }

    </style>
</head>
<body>

    <h1>‚öúÔ∏è Royal Crafter Notes</h1>

    <div class="price-section">
        <div class="price-grid">
            <div id="pk-leather" class="price-col"></div>
            <div id="pk-cloth" class="price-col"></div>
            <div id="pk-bar" class="price-col"></div>
            <div id="pk-plank" class="price-col"></div>
        </div>
    </div>

    <div class="profession-title">ü™ì Lumberjack</div>
    <div class="item-grid">
        <div class="item-card" data-img="T5_HEAD_GATHERER_WOOD" data-mat="leather" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_HEAD_GATHERER_WOOD" class="item-img"><div class="item-name">Cap</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_ARMOR_GATHERER_WOOD" data-mat="leather" data-qty="16"><img src="https://render.albiononline.com/v1/item/T5_ARMOR_GATHERER_WOOD" class="item-img"><div class="item-name">Garb</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_SHOES_GATHERER_WOOD" data-mat="leather" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_SHOES_GATHERER_WOOD" class="item-img"><div class="item-name">Boots</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_BACKPACK_GATHERER_WOOD" data-mat="bag" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_BACKPACK_GATHERER_WOOD" class="item-img"><div class="item-name">Bag</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_2H_TOOL_AXE" data-mat="tool" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_2H_TOOL_AXE" class="item-img"><div class="item-name">Axe</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
    </div>

    <div class="profession-title">‚õèÔ∏è Miner</div>
    <div class="item-grid">
        <div class="item-card" data-img="T5_HEAD_GATHERER_ORE" data-mat="bar" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_HEAD_GATHERER_ORE" class="item-img"><div class="item-name">Cap</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_ARMOR_GATHERER_ORE" data-mat="bar" data-qty="16"><img src="https://render.albiononline.com/v1/item/T5_ARMOR_GATHERER_ORE" class="item-img"><div class="item-name">Garb</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_SHOES_GATHERER_ORE" data-mat="bar" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_SHOES_GATHERER_ORE" class="item-img"><div class="item-name">Boots</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_BACKPACK_GATHERER_ORE" data-mat="bag" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_BACKPACK_GATHERER_ORE" class="item-img"><div class="item-name">Bag</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_2H_TOOL_PICK" data-mat="tool" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_2H_TOOL_PICK" class="item-img"><div class="item-name">Pick</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
    </div>

    <div class="profession-title">üó°Ô∏è Skinner</div>
    <div class="item-grid">
        <div class="item-card" data-img="T5_HEAD_GATHERER_HIDE" data-mat="leather" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_HEAD_GATHERER_HIDE" class="item-img"><div class="item-name">Cap</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_ARMOR_GATHERER_HIDE" data-mat="leather" data-qty="16"><img src="https://render.albiononline.com/v1/item/T5_ARMOR_GATHERER_HIDE" class="item-img"><div class="item-name">Garb</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_SHOES_GATHERER_HIDE" data-mat="leather" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_SHOES_GATHERER_HIDE" class="item-img"><div class="item-name">Boots</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_BACKPACK_GATHERER_HIDE" data-mat="bag" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_BACKPACK_GATHERER_HIDE" class="item-img"><div class="item-name">Bag</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_2H_TOOL_KNIFE" data-mat="tool" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_2H_TOOL_KNIFE" class="item-img"><div class="item-name">Knife</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
    </div>

    <div class="profession-title">üî® Quarrier</div>
    <div class="item-grid">
        <div class="item-card" data-img="T5_HEAD_GATHERER_ROCK" data-mat="bar" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_HEAD_GATHERER_ROCK" class="item-img"><div class="item-name">Cap</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_ARMOR_GATHERER_ROCK" data-mat="bar" data-qty="16"><img src="https://render.albiononline.com/v1/item/T5_ARMOR_GATHERER_ROCK" class="item-img"><div class="item-name">Garb</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_SHOES_GATHERER_ROCK" data-mat="bar" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_SHOES_GATHERER_ROCK" class="item-img"><div class="item-name">Boots</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_BACKPACK_GATHERER_ROCK" data-mat="bag" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_BACKPACK_GATHERER_ROCK" class="item-img"><div class="item-name">Bag</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_2H_TOOL_HAMMER" data-mat="tool" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_2H_TOOL_HAMMER" class="item-img"><div class="item-name">Hamr</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
    </div>

     <div class="profession-title">üåæ Harvester</div>
     <div class="item-grid">
         <div class="item-card" data-img="T5_HEAD_GATHERER_FIBER" data-mat="cloth" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_HEAD_GATHERER_FIBER" class="item-img"><div class="item-name">Cap</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
         <div class="item-card" data-img="T5_ARMOR_GATHERER_FIBER" data-mat="cloth" data-qty="16"><img src="https://render.albiononline.com/v1/item/T5_ARMOR_GATHERER_FIBER" class="item-img"><div class="item-name">Garb</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
         <div class="item-card" data-img="T5_SHOES_GATHERER_FIBER" data-mat="cloth" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_SHOES_GATHERER_FIBER" class="item-img"><div class="item-name">Boots</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
         <div class="item-card" data-img="T5_BACKPACK_GATHERER_FIBER" data-mat="bag" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_BACKPACK_GATHERER_FIBER" class="item-img"><div class="item-name">Bag</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
         <div class="item-card" data-img="T5_2H_TOOL_SICKLE" data-mat="tool" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_2H_TOOL_SICKLE" class="item-img"><div class="item-name">Sickle</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
     </div>

    <div class="profession-title">üé£ Fisherman</div>
    <div class="item-grid">
        <div class="item-card" data-img="T5_HEAD_GATHERER_FISH" data-mat="leather" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_HEAD_GATHERER_FISH" class="item-img"><div class="item-name">Cap</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_ARMOR_GATHERER_FISH" data-mat="leather" data-qty="16"><img src="https://render.albiononline.com/v1/item/T5_ARMOR_GATHERER_FISH" class="item-img"><div class="item-name">Garb</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_SHOES_GATHERER_FISH" data-mat="leather" data-qty="8"><img src="https://render.albiononline.com/v1/item/T5_SHOES_GATHERER_FISH" class="item-img"><div class="item-name">Boots</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_BACKPACK_GATHERER_FISH" data-mat="bag" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_BACKPACK_GATHERER_FISH" class="item-img"><div class="item-name">Bag</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
        <div class="item-card" data-img="T5_2H_TOOL_FISHINGROD" data-mat="rod" data-qty="1"><img src="https://render.albiononline.com/v1/item/T5_2H_TOOL_FISHINGROD" class="item-img"><div class="item-name">Rod</div><div class="counter-box"><button class="btn-cnt min">-</button><span class="cnt-val">0</span><button class="btn-cnt plus">+</button></div></div>
    </div>


    <div class="dashboard">
        <div class="dash-header">
            <span style="color:var(--accent-gold); font-size:0.8rem;">DASHBOARD</span>
            <button class="reset-btn" onclick="resetCounts()">‚Üª Reset Item</button>
        </div>
        <div class="dash-tabs">
            <div class="tab active" onclick="setTab('res')">üì¶ Hasil</div>
            <div class="tab" onclick="setTab('mat')">üõí Material</div>
        </div>
        
        <div id="tab-res" class="dash-body">
            <div class="gallery" id="gal-container">
                <small style="color:#555; width:100%; text-align:center;">Belum ada item.</small>
            </div>
        </div>

        <div id="tab-mat" class="dash-body hidden">
            <div class="mat-row">
                <div class="mat-label"><img src="https://render.albiononline.com/v1/item/T5_LEATHER"> Leather</div>
                <div class="mat-total">
                    <div id="t-leather-qty" style="color:#aaa;">0</div>
                    <div id="t-leather-cost">0</div>
                </div>
            </div>
            <div class="mat-row">
                <div class="mat-label"><img src="https://render.albiononline.com/v1/item/T5_CLOTH"> Cloth</div>
                <div class="mat-total">
                    <div id="t-cloth-qty" style="color:#aaa;">0</div>
                    <div id="t-cloth-cost">0</div>
                </div>
            </div>
            <div class="mat-row">
                <div class="mat-label"><img src="https://render.albiononline.com/v1/item/T5_METALBAR"> Metal Bar</div>
                <div class="mat-total">
                    <div id="t-bar-qty" style="color:#aaa;">0</div>
                    <div id="t-bar-cost">0</div>
                </div>
            </div>
            <div class="mat-row">
                <div class="mat-label"><img src="https://render.albiononline.com/v1/item/T5_PLANKS"> Plank</div>
                <div class="mat-total">
                    <div id="t-plank-qty" style="color:#aaa;">0</div>
                    <div id="t-plank-cost">0</div>
                </div>
            </div>

            <div class="grand-total">Total: <span id="g-total">0</span></div>
        </div>
    </div>

    <script>
        // --- DATA HARGA PERSISTEN ---
        const prices = { leather: [0,0,0,0], cloth: [0,0,0,0], bar: [0,0,0,0], plank: [0,0,0,0] };
        
        // --- 1. GENERATE DIGIT PICKERS ---
        const mats = [
            {id:'leather', img:'T5_LEATHER'}, 
            {id:'cloth', img:'T5_CLOTH'}, 
            {id:'bar', img:'T5_METALBAR'}, 
            {id:'plank', img:'T5_PLANKS'}
        ];

        mats.forEach(m => {
            const container = document.getElementById(`pk-${m.id}`);
            container.innerHTML = `<img src="https://render.albiononline.com/v1/item/${m.img}" class="mat-icon-head">
            <div class="digit-picker">
                ${[0,1,2,3].map(i => `
                    <div class="digit-wrapper">
                        <button class="btn-digit" onclick="updPrice('${m.id}',${i},1)">‚ñ≤</button>
                        <div id="d-${m.id}-${i}" class="val-digit">0</div>
                        <button class="btn-digit" onclick="updPrice('${m.id}',${i},-1)">‚ñº</button>
                    </div>
                `).join('')}
            </div>`;
        });

        // --- 2. LOGIC HARGA ---
        function updPrice(type, idx, dir) {
            let v = prices[type][idx] + dir;
            if(v > 9) v = 0; if(v < 0) v = 9;
            prices[type][idx] = v;
            document.getElementById(`d-${type}-${idx}`).innerText = v;
            calc();
        }

        function getPrice(type) {
            const p = prices[type];
            return (p[0]*1000) + (p[1]*100) + (p[2]*10) + p[3];
        }

        // --- 3. COUNTER LOGIC ---
        document.querySelectorAll('.item-card').forEach(card => {
            const disp = card.querySelector('.cnt-val');
            card.querySelector('.plus').onclick = () => {
                let v = parseInt(disp.innerText) + 1;
                disp.innerText = v;
                if(v > 0) card.classList.add('active');
                calc();
            };
            card.querySelector('.min').onclick = () => {
                let v = parseInt(disp.innerText);
                if(v > 0) {
                    v--; disp.innerText = v;
                    if(v === 0) card.classList.remove('active');
                    calc();
                }
            };
        });

        // --- 4. CALCULATE ALL (THE BRAIN) ---
        function calc() {
            let needs = { leather:0, cloth:0, bar:0, plank:0 };
            let htmlGal = '';
            let hasItem = false;

            document.querySelectorAll('.item-card').forEach(card => {
                let count = parseInt(card.querySelector('.cnt-val').innerText);
                if(count > 0) {
                    hasItem = true;
                    // Gallery
                    htmlGal += `<div class="gal-item"><img src="${card.querySelector('img').src}"><div class="gal-badge">${count}</div></div>`;

                    // Calculate Mat
                    let type = card.dataset.mat;
                    let qty = parseInt(card.dataset.qty);

                    if (type === 'leather') needs.leather += (count * qty);
                    else if (type === 'cloth') needs.cloth += (count * qty);
                    else if (type === 'bar') needs.bar += (count * qty);
                    else if (type === 'tool') {
                        // Tool Recipe: 2 Bar + 6 Plank
                        needs.bar += (count * 2);
                        needs.plank += (count * 6);
                    }
                    else if (type === 'rod') {
                        // Rod Recipe: 2 Cloth + 6 Plank
                        needs.cloth += (count * 2);
                        needs.plank += (count * 6);
                    }
                    else if (type === 'bag') {
                        // Bag Recipe: 4 Leather + 4 Cloth
                        needs.leather += (count * 4);
                        needs.cloth += (count * 4);
                    }
                }
            });

            // Update Gallery
            document.getElementById('gal-container').innerHTML = hasItem ? htmlGal : '<small style="color:#555; width:100%; text-align:center;">Belum ada item.</small>';

            // Update Costs
            const fmt = n => n.toLocaleString('id-ID');
            const costL = needs.leather * getPrice('leather');
            const costC = needs.cloth * getPrice('cloth');
            const costB = needs.bar * getPrice('bar');
            const costP = needs.plank * getPrice('plank');

            document.getElementById('t-leather-qty').innerText = fmt(needs.leather);
            document.getElementById('t-leather-cost').innerText = fmt(costL);

            document.getElementById('t-cloth-qty').innerText = fmt(needs.cloth);
            document.getElementById('t-cloth-cost').innerText = fmt(costC);

            document.getElementById('t-bar-qty').innerText = fmt(needs.bar);
            document.getElementById('t-bar-cost').innerText = fmt(costB);

            document.getElementById('t-plank-qty').innerText = fmt(needs.plank);
            document.getElementById('t-plank-cost').innerText = fmt(costP);

            document.getElementById('g-total').innerText = fmt(costL + costC + costB + costP);
        }

        // --- 5. UTILS ---
        function resetCounts() {
            if(confirm('Reset jumlah item?')) {
                document.querySelectorAll('.cnt-val').forEach(el => el.innerText = '0');
                document.querySelectorAll('.item-card').forEach(el => el.classList.remove('active'));
                calc();
            }
        }

        function setTab(t) {
            document.getElementById('tab-res').classList.add('hidden');
            document.getElementById('tab-mat').classList.add('hidden');
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            
            document.getElementById(`tab-${t}`).classList.remove('hidden');
            // Lazy highlight check
            if(t==='res') document.querySelectorAll('.tab')[0].classList.add('active');
            else document.querySelectorAll('.tab')[1].classList.add('active');
        }
    </script>
</body>
</html>
